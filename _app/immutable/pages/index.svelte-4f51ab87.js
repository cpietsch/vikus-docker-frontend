import{S as q,i as K,s as N,e as _,t as k,k as x,c as g,a as b,h as E,d as u,m as v,b as f,g as U,I as o,Q as D,R as C,F as T,T as O,x as H,U as z,y as B,z as G,q as Q,o as A,C as J}from"../chunks/index-74cce875.js";import{b as M}from"../chunks/api-a1f7356f.js";import{g as W}from"../chunks/navigation-0e6511d1.js";import{b as X}from"../chunks/paths-396f020f.js";import"../chunks/singletons-d1fb5791.js";function L(h){let e,a,s,r,t,d;return{c(){e=_("div"),a=_("p"),s=k("Error"),r=x(),t=_("p"),d=k("That doesn't look like a IIIF V3 collection URL."),this.h()},l(c){e=g(c,"DIV",{class:!0});var l=b(e);a=g(l,"P",{class:!0});var n=b(a);s=E(n,"Error"),n.forEach(u),r=v(l),t=g(l,"P",{});var w=b(t);d=E(w,"That doesn't look like a IIIF V3 collection URL."),w.forEach(u),l.forEach(u),this.h()},h(){f(a,"class","font-semibold"),f(e,"class","mt-4 p-4 bg-red-100 text-red-500 rounded-md")},m(c,l){U(c,e,l),o(e,a),o(a,s),o(e,r),o(e,t),o(t,d)},d(c){c&&u(e)}}}function Y(h){let e,a,s,r,t,d,c,l,n,w,m,y,V,S,F,i=h[1]&&L();return{c(){e=_("div"),a=_("h1"),s=k("Create a new VIKUS Viewer instance"),r=x(),t=_("p"),d=k("Paste a IIIF V3 collection URL here and we will parse it and create a new instance for you."),c=x(),l=_("figure"),n=_("input"),w=x(),m=_("button"),y=k("Create"),V=x(),i&&i.c(),this.h()},l(I){e=g(I,"DIV",{class:!0});var p=b(e);a=g(p,"H1",{class:!0});var P=b(a);s=E(P,"Create a new VIKUS Viewer instance"),P.forEach(u),r=v(p),t=g(p,"P",{class:!0});var R=b(t);d=E(R,"Paste a IIIF V3 collection URL here and we will parse it and create a new instance for you."),R.forEach(u),c=v(p),l=g(p,"FIGURE",{class:!0});var $=b(l);n=g($,"INPUT",{type:!0,name:!0,id:!0,class:!0,placeholder:!0}),w=v($),m=g($,"BUTTON",{type:!0,class:!0});var j=b(m);y=E(j,"Create"),j.forEach(u),$.forEach(u),V=v(p),i&&i.l(p),p.forEach(u),this.h()},h(){f(a,"class","text-3xl sm:text-4xl font-bold text-slate-900 tracking-tight dark:text-slate-200"),f(t,"class","mt-4 mb-6 text-slate-700 dark:text-slate-400"),f(n,"type","url"),f(n,"name","url"),f(n,"id","url"),f(n,"class","rounded-lg flex-auto p-2 mr-1 border-2 border-gray-300"),f(n,"placeholder","https://iiif.wellcomecollection.org/presentation/collections/genres/Stickers"),n.required=!0,f(m,"type","submit"),f(m,"class","py-2 px-3 w-32 bg-cyan-500 text-white text-sm font-semibold rounded-md shadow-lg hover:shadow-cyan-500/50 focus:outline-none"),f(l,"class","flex shadow-xl rounded-xl p-8 bg-white dark:bg-slate-800"),f(e,"class","flex-auto max-w-4xl")},m(I,p){U(I,e,p),o(e,a),o(a,s),o(e,r),o(e,t),o(t,d),o(e,c),o(e,l),o(l,n),D(n,h[0]),o(l,w),o(l,m),o(m,y),o(e,V),i&&i.m(e,null),S||(F=[C(n,"change",h[3]),C(n,"input",h[4]),C(m,"click",h[2])],S=!0)},p(I,[p]){p&1&&n.value!==I[0]&&D(n,I[0]),I[1]?i||(i=L(),i.c(),i.m(e,null)):i&&(i.d(1),i=null)},i:T,o:T,d(I){I&&u(e),i&&i.d(),S=!1,O(F)}}}function Z(h,e,a){let s="https://iiif.wellcomecollection.org/presentation/collections/genres/Stickers",r=null;const t=async l=>{l.preventDefault();let n=!1;try{n=(await(await fetch(s)).json()).type==="Collection"}catch{n=!1}if(!n){a(1,r=!0);return}const w=await M("POST",`/instances?url=${s}`),m=await w.json();w.ok&&W(`${X}/instances/${m.id}`)},d=l=>a(1,r=null);function c(){s=this.value,a(0,s)}return[s,r,t,d,c]}class ee extends q{constructor(e){super(),K(this,e,Z,Y,N,{})}}function te(h){let e,a,s,r;return s=new ee({}),{c(){e=x(),a=_("section"),H(s.$$.fragment),this.h()},l(t){z("svelte-j5p36l",document.head).forEach(u),e=v(t),a=g(t,"SECTION",{});var c=b(a);B(s.$$.fragment,c),c.forEach(u),this.h()},h(){document.title="VIKUS Docker IIIF"},m(t,d){U(t,e,d),U(t,a,d),G(s,a,null),r=!0},p:T,i(t){r||(Q(s.$$.fragment,t),r=!0)},o(t){A(s.$$.fragment,t),r=!1},d(t){t&&u(e),t&&u(a),J(s)}}}const re=!1;class ie extends q{constructor(e){super(),K(this,e,null,te,N,{})}}export{ie as default,re as prerender};
